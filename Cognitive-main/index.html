<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Labyrinth</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #020617;
        overflow: hidden;
      }
      #root {
        height: 100vh;
        overflow-y: auto;
        position: relative;
      }
      .font-orbitron {
        font-family: 'Orbitron', sans-serif;
      }
      .text-glow {
        text-shadow: 0 0 8px rgba(34, 211, 238, 0.7);
      }
      .button-glow {
        transition: all 0.3s ease;
        box-shadow: 0 0 5px rgba(34, 211, 238, 0.5), inset 0 0 5px rgba(34, 211, 238, 0.3);
      }
      .button-glow:hover:not(:disabled) {
        box-shadow: 0 0 15px rgba(34, 211, 238, 0.8), inset 0 0 8px rgba(34, 211, 238, 0.5);
      }
      .button-glow:active:not(:disabled) {
        transform: scale(0.98);
        box-shadow: 0 0 8px rgba(34, 211, 238, 0.6), inset 0 0 8px rgba(34, 211, 238, 0.4);
      }
      .line-highlight-monaco {
        background-color: rgba(34, 211, 238, 0.2) !important;
        border-left: 3px solid #22d3ee;
        border-radius: 2px;
      }
      .breakpoint-marker {
        background: #f43f5e;
        border-radius: 50%;
        width: 8px !important;
        height: 8px !important;
        margin-left: 5px;
      }
      .quiz-option-button.correct-answer {
        background-color: #22c55e !important;
        border-color: #4ade80 !important;
        color: white !important;
        box-shadow: 0 0 10px #22c55e;
      }
      .quiz-option-button.incorrect-answer {
        background-color: #ef4444 !important;
        border-color: #f87171 !important;
        color: white !important;
        animation: shake 0.5s ease-in-out;
      }
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }
      .language-select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22%2322d3ee%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M4.22%206.22a.75.75%200%200%201%201.06%200L8%208.94l2.72-2.72a.75.75%200%201%201%201.06%201.06l-3.25%203.25a.75.75%200%200%201-1.06%200L4.22%207.28a.75.75%200%200%201%200-1.06Z%22%20clip-rule%3D%22evenodd%22%20%2F%3E%3C%2Fsvg%3E");
        background-repeat: no-repeat;
        background-position: right 0.5rem center;
        background-size: 1.25em;
        padding-right: 2.5rem;
      }
      #neural-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: #020617;
      }

      /* Mind Map Styles */
      .mind-map-node {
        transition: all 0.3s ease;
        border-width: 2px;
        position: relative;
        z-index: 10;
      }
      .mind-map-node:hover:not(:disabled) {
        transform: scale(1.1);
        box-shadow: 0 0 20px currentColor;
      }
      .mind-map-node.difficulty-0 { color: #4ade80; }
      .mind-map-node.difficulty-1 { color: #facc15; }
      .mind-map-node.difficulty-2 { color: #f87171; }
      
      .mind-map-node.completed {
        border-color: #22d3ee;
        box-shadow: 0 0 15px #22d3ee;
      }
      .mind-map-node.completed::after {
        content: 'âœ“';
        position: absolute;
        bottom: 5px;
        right: 10px;
        font-size: 1.2rem;
        color: #22d3ee;
        text-shadow: 0 0 5px #22d3ee;
      }
      .mind-map-node.locked {
        color: #64748b; /* slate-500 */
        cursor: not-allowed;
        background-color: rgba(30, 41, 59, 0.8);
        border-style: dashed;
      }

      .mind-map-connector {
        stroke: rgba(100, 116, 139, 0.5);
        stroke-width: 2px;
        transition: stroke 0.3s ease;
      }
      .mind-map-connector.unlocked {
        stroke: #22d3ee;
        stroke-dasharray: 1500;
        animation: draw-line 1s ease-out forwards;
      }
      @keyframes draw-line {
          from { stroke-dashoffset: 1500; }
          to { stroke-dashoffset: 0; }
      }

      /* Data Orb Styles */
      .data-orb {
        transition: all 0.5s ease;
        animation: fadeIn 0.5s ease, float 6s ease-in-out infinite;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.5); }
        to { opacity: 1; transform: scale(1); }
      }
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }
      .data-orb-pulse {
        animation: pulse 0.7s ease;
      }
      @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.7); }
        70% { box-shadow: 0 0 10px 15px rgba(34, 211, 238, 0); }
        100% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0); }
      }
      
      /* XP Gain Animation */
      .xp-gain-indicator {
        animation: float-up-fade-out 2s ease-out forwards;
      }
      @keyframes float-up-fade-out {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        100% {
          transform: translateY(-50px);
          opacity: 0;
        }
      }

      /* Modal Base Styles */
      .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(2, 6, 23, 0.8);
        backdrop-filter: blur(5px);
        z-index: 40;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: fadeInBackdrop 0.5s ease;
      }
      @keyframes fadeInBackdrop {
          from { opacity: 0; }
          to { opacity: 1; }
      }
      .modal-panel {
          animation: scaleUp 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28);
          position: relative;
          overflow: hidden;
      }
      @keyframes scaleUp {
          from { transform: scale(0.7); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
      }

      /* Challenge Complete Modal */
      .pulse-xp {
          animation: pulseXP 1.5s ease-in-out infinite;
      }
      @keyframes pulseXP {
          0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.5); }
          50% { transform: scale(1.1); box-shadow: 0 0 20px 10px rgba(34, 211, 238, 0); }
      }
      .confetti {
          position: absolute;
          width: 8px;
          height: 16px;
          opacity: 0.8;
          animation: fall 5s linear infinite;
          top: -20px;
      }
      @keyframes fall {
          to {
              transform: translateY(110vh) rotate(720deg);
              opacity: 0;
          }
      }

      /* Level Up Modal */
      @keyframes pulse-level {
          0%, 100% { transform: scale(1); text-shadow: 0 0 10px #22d3ee; }
          50% { transform: scale(1.1); text-shadow: 0 0 30px #22d3ee; }
      }
      .pulse-level {
          animation: pulse-level 1.5s ease-in-out infinite;
      }
      .sparkle {
          position: absolute;
          width: 2px;
          height: 2px;
          background-color: #22d3ee;
          border-radius: 50%;
          box-shadow: 0 0 5px #22d3ee, 0 0 10px #22d3ee;
          opacity: 0;
          animation: sparkle-fall 3s linear infinite;
          top: -20px;
      }
      @keyframes sparkle-fall {
          0% {
              transform: translateY(0);
              opacity: 1;
          }
          100% {
              transform: translateY(110vh);
              opacity: 0;
          }
      }

      /* Game UI Panel Styles */
      .game-panel {
        background-color: rgba(15, 23, 42, 0.6); /* bg-slate-900/60 */
        border: 1px solid rgba(56, 189, 248, 0.2); /* border-sky-400/20 */
        backdrop-filter: blur(8px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        border-radius: 0.5rem;
      }
      .game-panel-header {
        background-color: rgba(0, 0, 0, 0.3);
        padding: 0.75rem 1rem;
        border-bottom: 1px solid rgba(56, 189, 248, 0.2);
        clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 20px) 100%, 0 100%);
      }
      .game-panel-content {
        padding: 1rem;
        background-image:
          linear-gradient(rgba(56, 189, 248, 0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(56, 189, 248, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
      }

      /* Header Enhancements */
      .level-display {
        position: relative;
        width: 60px;
        height: 68px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .level-display-hex {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        fill: rgba(15, 23, 42, 0.5);
        stroke: #22d3ee;
        stroke-width: 2;
        filter: drop-shadow(0 0 5px #22d3ee);
      }
      .xp-bar-container {
        width: 128px;
        background-color: rgba(15, 23, 42, 0.5);
        border-radius: 4px;
        height: 10px;
        margin-top: 4px;
        border: 1px solid rgba(34, 211, 238, 0.2);
        padding: 1px;
        overflow: hidden;
      }
      .xp-bar-fill {
        background-color: #22d3ee;
        height: 100%;
        border-radius: 2px 0 0 2px;
        transition: width 0.5s ease-out;
        box-shadow: 0 0 8px rgba(34, 211, 238, 0.8);
        clip-path: polygon(0 0, calc(100% - 5px) 0, 100% 50%, calc(100% - 5px) 100%, 0 100%);
      }
      .xp-bar-fill[style*="width: 100%"] {
        clip-path: none;
        border-radius: 2px;
      }
    </style>
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.49.0/min/vs/loader.js"></script>
<script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
<body>
    <canvas id="neural-bg"></canvas>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>